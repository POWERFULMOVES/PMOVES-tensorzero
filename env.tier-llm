# PMOVES.AI Tier Environment: LLM
# For LLM Gateway and AI services (TensorZero, etc.)
# Source after env.shared: source env.shared && source env.tier-llm.sh

# ============================================================================
# LLM Tier Configuration
# ============================================================================

export TIER=llm

# Request limits
export MAX_CONCURRENT_REQUESTS=${MAX_CONCURRENT_REQUESTS:-50}
export MAX_REQUEST_SIZE_MB=${MAX_REQUEST_SIZE_MB:-10}
export REQUEST_TIMEOUT_MS=${REQUEST_TIMEOUT_MS:-120000}  # 2 minutes
export STREAMING_TIMEOUT_MS=${STREAMING_TIMEOUT_MS:-300000}  # 5 minutes

# Token limits
export MAX_TOKENS_PER_REQUEST=${MAX_TOKENS_PER_REQUEST:-128000}
export MAX_OUTPUT_TOKENS=${MAX_OUTPUT_TOKENS:-8192}
export CONTEXT_WINDOW_SIZE=${CONTEXT_WINDOW_SIZE:-200000}

# Rate limiting (per model)
export RATE_LIMIT_ENABLED=${RATE_LIMIT_ENABLED:-true}
export RATE_LIMIT_REQUESTS_PER_MINUTE=${RATE_LIMIT_REQUESTS_PER_MINUTE:-100}
export RATE_LIMIT_TOKENS_PER_MINUTE=${RATE_LIMIT_TOKENS_PER_MINUTE:-100000}

# Observability
export OBSERVABILITY_ENABLED=${OBSERVABILITY_ENABLED:-true}
export REQUEST_LOGGING_ENABLED=${REQUEST_LOGGING_ENABLED:-true}
export METRICS_EXPORT_ENABLED=${METRICS_EXPORT_ENABLED:-true}

# ClickHouse for metrics
export CLICKHOUSE_URL=${CLICKHOUSE_URL:-http://tensorzero-clickhouse:8123}
export CLICKHOUSE_USER=${CLICKHOUSE_USER:-tensorzero}
export CLICKHOUSE_PASSWORD=${CLICKHOUSE_PASSWORD:-tensorzero}
export CLICKHOUSE_DATABASE=${CLICKHOUSE_DATABASE:-tensorzero}

# Model configuration
export DEFAULT_MODEL=${DEFAULT_MODEL:-claude-sonnet-4-5}
export DEFAULT_TEMPERATURE=${DEFAULT_TEMPERATURE:-0.7}
export DEFAULT_TOP_P=${DEFAULT_TOP_P:-0.9}
export DEFAULT_TOP_K=${DEFAULT_TOP_K:-40}

# Caching
export CACHE_ENABLED=${CACHE_ENABLED:-true}
export_CACHE_TTL=${CACHE_TTL:-3600}  # 1 hour
export CACHE_MAX_SIZE=${CACHE_MAX_SIZE:-10000}

# Fallback configuration
export FALLBACK_ENABLED=${FALLBACK_ENABLED:-true}
export FALLBACK_MODEL=${FALLBACK_MODEL:-gpt-4o-mini}
export FALLBACK_MAX_RETRIES=${FALLBACK_MAX_RETRIES:-2}
